

SQL> --test create index_cluster
SQL> drop table if exists TB_TABLE_01;

Succeed.

SQL> drop table if exists TB_PARTITION_HASH_01;

Succeed.

SQL> 
SQL> CREATE TABLE TB_TABLE_01
  2        (EMPNO NUMBER NOT NULL,
  3         ENAME VARCHAR(64 BYTE),
  4         JOB VARCHAR(10 BYTE),
  5         MGR NUMBER(20),
  6         HIREDATE DATE,
  7         SAL NUMBER(10, 2),
  8         COMM VARCHAR(256 BYTE),
  9         DEPTNO NUMBER);

Succeed.

SQL> 
SQL> declare
  2 v_empno number;
  3 v_mgr   number;
  4 v_deptno number;
  5 begin
  6 for i in 1..1000 loop
  7 v_empno := i;
  8 v_mgr := 2*i;
  9 v_deptno :=i;
 10 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'SMITH',  'CLERK',     v_mgr,TO_DATE('17-DEC-1980', 'DD-MON-YYYY'),  800, NULL, v_deptno);
 11 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'ALLEN',  'SALESMAN',  v_mgr,TO_DATE('20-FEB-1981', 'DD-MON-YYYY'), 1600,  300, v_deptno);
 12 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'WARD',   'SALESMAN',  v_mgr,TO_DATE('22-FEB-1981', 'DD-MON-YYYY'), 1250,  500, v_deptno);
 13 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'JONES',  'MANAGER',   v_mgr,TO_DATE('2-APR-1981', 'DD-MON-YYYY'),  2975, NULL, v_deptno);
 14 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'MARTIN', 'SALESMAN',  v_mgr,TO_DATE('28-SEP-1981', 'DD-MON-YYYY'), 1250, 1400, v_deptno);
 15 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'BLAKE',  'MANAGER',   v_mgr,TO_DATE('1-MAY-1981', 'DD-MON-YYYY'),  2850, NULL, v_deptno);
 16 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'CLARK',  'MANAGER',   v_mgr,TO_DATE('9-JUN-1981', 'DD-MON-YYYY'),  2450, NULL, v_deptno);
 17 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'SCOTT',  'ANALYST',   v_mgr,TO_DATE('09-DEC-1982', 'DD-MON-YYYY'), 3000, NULL, v_deptno);
 18 INSERT INTO TB_TABLE_01 VALUES (v_empno, 'KING',   'PRESIDENT', null,TO_DATE('17-NOV-1981', 'DD-MON-YYYY'), 5000, NULL, v_deptno);
 19 INSERT INTO TB_TABLE_01 VALUES (7934,    'MILLER', 'CLERK',     7782,TO_DATE('23-JAN-1982', 'DD-MON-YYYY'), 1300, NULL, v_deptno);
 20 end loop;
 21 commit;
 22 end;
 23 /

PL/SQL procedure successfully completed.

SQL> 
SQL> CREATE TABLE TB_PARTITION_HASH_01
  2 (EMPNO NUMBER NOT NULL,
  3         ENAME VARCHAR(64 BYTE),
  4         JOB VARCHAR(10 BYTE),
  5         MGR NUMBER(20),
  6         HIREDATE DATE,
  7         SAL NUMBER(10, 2),
  8         COMM VARCHAR(256 BYTE),
  9         DEPTNO NUMBER)
 10 PARTITION BY hash(EMPNO)
 11 (partition part_01,
 12  partition part_02,
 13  partition part_03);

Succeed.

SQL> insert into TB_PARTITION_HASH_01 select * from TB_TABLE_01;

10000 rows affected.

SQL> commit;

Succeed.

SQL> 
SQL> create indexcluster (
  2 INDEX idx_clus_04 on TB_PARTITION_HASH_01(EMPNO ASC,MGR DESC) parallel 48,
  3 INDEX idx_clus_05 on TB_PARTITION_HASH_01(EMPNO ASC,SAL DESC) parallel 48,
  4 INDEX idx_clus_06 on TB_PARTITION_HASH_01(JOB ASC,ENAME DESC) parallel 48,
  5 INDEX idx_clus_07 on TB_PARTITION_HASH_01(ENAME ASC,MGR DESC) parallel 48,
  6 INDEX idx_clus_08 on TB_PARTITION_HASH_01(MGR ASC,HIREDATE DESC) parallel 48,
  7 INDEX idx_clus_09 on TB_PARTITION_HASH_01(HIREDATE ASC,SAL DESC) parallel 48,
  8 INDEX idx_clus_10 on TB_PARTITION_HASH_01(SAL ASC,COMM DESC) parallel 48,
  9 INDEX idx_clus_11 on TB_PARTITION_HASH_01(HIREDATE ASC,SAL,DEPTNO DESC) parallel 48);

Succeed.

SQL> 



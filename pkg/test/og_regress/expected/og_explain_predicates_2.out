SQL> -- @owner: Nerifish
SQL> -- @date: 2026/1/31
SQL> -- @testpoint: explainæ‰§è¡Œæ¡ä»¶ä¸­å¯¹varcharç±»åž‹çš„between,like,in,is nullæµ‹è¯•,è¦æ±‚rowsåˆ—çš„å€¼ä¸Žselectå°½å¯èƒ½ç›¸è¿‘
SQL> DROP TABLE IF EXISTS test_explain_data;

Succeed.

SQL> 
SQL> -- åˆ›å»ºæµ‹è¯•è¡¨ï¼Œä½¿ç”¨varcharç±»åž‹
SQL> CREATE TABLE test_explain_data (
  2     id INT PRIMARY KEY,
  3     varchar_col VARCHAR(100)  -- ä½¿ç”¨varcharç±»åž‹ï¼Œæœ€å¤§é•¿åº¦100
  4 );

Succeed.

SQL> 
SQL> -- æ’å…¥10000æ¡éšæœºæ•°æ®
SQL> BEGIN
  2     DECLARE
  3         str_len INT;
  4         rand_str VARCHAR(100);
  5         rand_char CHAR(1);
  6         insert_pos INT;
  7     BEGIN
  8         -- æ’å…¥å‰100æ¡ç‰¹å®šæ•°æ®ï¼ŒåŒ…å«å„ç§è¾¹ç•Œæƒ…å†µå’Œç‰¹æ®Šå­—ç¬¦
  9         INSERT INTO test_explain_data VALUES 
 10         (1, 'abc'),
 11         (2, 'def'),
 12         (3, 'ghi'),
 13         (4, 'jkl'),
 14         (5, 'mno'),
 15         (6, 'pqr'),
 16         (7, 'stu'),
 17         (8, 'vwx'),
 18         (9, 'yz'),
 19         (10, ''),
 20         (11, 'a'),
 21         (12, 'z'),
 22         (13, 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa'),  -- 40ä¸ªa
 23         (14, 'zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz'),  -- 40ä¸ªz
 24         (15, 'abcdefghijklmnopqrstuvwxyzabcdefghijklmn'),  -- 40ä¸ªå­—æ¯
 25         (16, 'test'),
 26         (17, 'null_test'),
 27         (18, 'like_test'),
 28         (19, 'between_test'),
 29         (20, 'in_test'),
 30         (21, 'abc123'),
 31         (22, 'special%char'),
 32         (23, 'char_with_space'),
 33         (24, 'char_with_underscore'),
 34         (25, 'char-with-hyphen'),
 35         (26, 'char_with_numbers123'),
 36         (27, 'char_with_CAPS'),
 37         (28, 'char_with_ç‰¹æ®Šå­—ç¬¦'),
 38         (29, 'char_with_mixed123abc'),
 39         (30, 'char_with_punctuation!'),
 40         (31, NULL),  -- æ’å…¥NULLå€¼
 41         (32, NULL),  -- æ’å…¥NULLå€¼
 42         (33, ''),
 43         (34, ' '),  -- å•ä¸ªç©ºæ ¼
 44         (35, '  '),  -- ä¸¤ä¸ªç©ºæ ¼
 45         (36, '        '),  -- 8ä¸ªç©ºæ ¼
 46         (37, '                                        '),  -- 40ä¸ªç©ºæ ¼
 47         (38, 'a b c d e'),
 48         (39, 'abc def ghi'),
 49         (40, 'test_data_123'),
 50         (41, 'very_long_string_that_is_close_to_max_length_but_not_quite_there_yet_1234567890'),
 51         (42, 'edge_case_1'),
 52         (43, 'edge_case_2'),
 53         (44, 'edge_case_3'),
 54         (45, 'è¾¹ç•Œå€¼æµ‹è¯•'),
 55         (46, 'a' || CHR(9) || 'b'),  -- åŒ…å«åˆ¶è¡¨ç¬¦
 56         (47, 'a' || CHR(10) || 'b'),  -- åŒ…å«æ¢è¡Œç¬¦
 57         (48, 'a' || CHR(13) || 'b'),  -- åŒ…å«å›žè½¦ç¬¦
 58         (49, 'unicode_æµ‹è¯•'),
 59         (50, 'emoji_ðŸ˜€');
 60         
 61         -- ä»Ž51å¼€å§‹æ’å…¥éšæœºæ•°æ®ï¼Œç›´åˆ°10000
 62         FOR i IN 51..10000 LOOP
 63             -- å†³å®šå­—ç¬¦ä¸²é•¿åº¦ï¼š0åˆ°80ä¹‹é—´éšæœºï¼Œvarchar(100)ä½†ä¿ç•™ä¸€äº›ç©ºé—´
 64             str_len := MOD(i, 80);
 65             
 66             -- åˆå§‹åŒ–å­—ç¬¦ä¸²
 67             rand_str := '';
 68             
 69             -- æ ¹æ®é•¿åº¦ç”Ÿæˆéšæœºå°å†™å­—æ¯å­—ç¬¦ä¸²
 70             FOR j IN 1..str_len LOOP
 71                 -- ä½¿ç”¨MOD(i*j, 26)ç”Ÿæˆ0-25çš„éšæœºæ•°ï¼ŒåŠ ä¸Š97å¾—åˆ°å°å†™å­—æ¯çš„ASCIIç 
 72                 rand_char := CHR(97 + MOD(i * j, 26));
 73                 rand_str := rand_str || rand_char;
 74             END LOOP;
 75             
 76             -- 5%çš„æ¦‚çŽ‡æ’å…¥NULL
 77             IF MOD(i, 20) = 0 THEN
 78                 rand_str := NULL;
 79             END IF;
 80             
 81             -- 3%çš„æ¦‚çŽ‡æ’å…¥ç©ºå­—ç¬¦ä¸²
 82             IF MOD(i, 33) = 0 THEN
 83                 rand_str := '';
 84             END IF;
 85             
 86             -- 2%çš„æ¦‚çŽ‡æ’å…¥åŒ…å«ç‰¹æ®Šå­—ç¬¦çš„å­—ç¬¦ä¸²
 87             IF MOD(i, 50) = 0 THEN
 88                 -- åœ¨éšæœºä½ç½®æ’å…¥ç‰¹æ®Šå­—ç¬¦
 89                 insert_pos := CASE 
 90                     WHEN str_len = 0 THEN 1 
 91                     ELSE MOD(i, str_len) + 1 
 92                 END;
 93                 rand_str := SUBSTRING(rand_str FROM 1 FOR insert_pos - 1) || 
 94                            CASE MOD(i, 8)
 95                                WHEN 0 THEN '%'
 96                                WHEN 1 THEN '_'
 97                                WHEN 2 THEN ' '
 98                                WHEN 3 THEN '-'
 99                                WHEN 4 THEN '!'
100                                WHEN 5 THEN '@'
101                                WHEN 6 THEN '#'
102                                ELSE '$'
103                            END ||
104                            SUBSTRING(rand_str FROM insert_pos);
105             END IF;
106             
107             -- 10%çš„æ¦‚çŽ‡æ’å…¥åŒ…å«æ•°å­—çš„å­—ç¬¦ä¸²
108             IF MOD(i, 10) = 0 THEN
109                 rand_str := rand_str || MOD(i, 1000);
110             END IF;
111             
112             -- æ’å…¥æ•°æ®
113             INSERT INTO test_explain_data VALUES (i, rand_str);
114             
115         END LOOP;
116         
117     END;
118 END;
119 /

PL/SQL procedure successfully completed.

SQL> 
SQL> -- æ”¶é›†ç»Ÿè®¡ä¿¡æ¯
SQL> ANALYZE TABLE test_explain_data compute statistics;

Succeed.

SQL> 
SQL> -----æµ‹è¯•BETWEENæ“ä½œç¬¦é€‚é…-----
SQL> -- ç”¨ä¾‹1: BETWEEN åŸºç¡€æµ‹è¯• - å°å†™å­—æ¯èŒƒå›´
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN 'a' AND 'f';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 125  | 15        |       |        |
| 1  |   AGGR                  |       |                   | 1    | 125  | 15        |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 3057 | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL BETWEEN 'a' AND 'f'                 

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN 'a' AND 'f';

COUNT(*)            
--------------------
1763                

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹2: BETWEEN è¾¹ç•Œæµ‹è¯• - ä»Žç©ºå­—ç¬¦ä¸²å¼€å§‹
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN '' AND 'c';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 1    | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL BETWEEN  AND 'c'                    

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN '' AND 'c';

COUNT(*)            
--------------------
0                   

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹3: BETWEEN è¾¹ç•Œæµ‹è¯• - åˆ°ç‰¹å®šå­—ç¬¦ä¸²
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN 'x' AND 'zzzzzz';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 125  | 15        |       |        |
| 1  |   AGGR                  |       |                   | 1    | 125  | 15        |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 3057 | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL BETWEEN 'x' AND 'zzzzzz'            

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN 'x' AND 'zzzzzz';

COUNT(*)            
--------------------
1073                

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹4: NOT BETWEEN æµ‹è¯•
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col NOT BETWEEN 'm' AND 't';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 153  | 33        |       |        |
| 1  |   AGGR                  |       |                   | 1    | 153  | 33        |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 6667 | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL NOT BETWEEN 'm' AND 't'             

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col NOT BETWEEN 'm' AND 't';

COUNT(*)            
--------------------
7279                

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹5: BETWEEN é•¿å­—ç¬¦ä¸²èŒƒå›´
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN 'aaaaaaaaaa' AND 'mmmmmmmmmm';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 125  | 15        |       |        |
| 1  |   AGGR                  |       |                   | 1    | 125  | 15        |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 3057 | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL BETWEEN 'aaaaaaaaaa' AND 'mmmmmmmmmm'

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col BETWEEN 'aaaaaaaaaa' AND 'mmmmmmmmmm';

COUNT(*)            
--------------------
4195                

1 rows fetched.

SQL> 
SQL> -----æµ‹è¯•IS NULLæ“ä½œç¬¦é€‚é…-----
SQL> -- ç”¨ä¾‹6: IS NULL åŸºç¡€æµ‹è¯•
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col IS NULL;

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 105  | 1         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 105  | 1         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 276  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL IS NULL                             

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col IS NULL;

COUNT(*)            
--------------------
276                 

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹7: IS NOT NULL æµ‹è¯•
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col IS NOT NULL;

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 175  | 48        |       |        |
| 1  |   AGGR                  |       |                   | 1    | 175  | 48        |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 9724 | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL IS NOT NULL                         

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col IS NOT NULL;

COUNT(*)            
--------------------
9724                

1 rows fetched.

SQL> 
SQL> -----æµ‹è¯•LIKEæ“ä½œç¬¦é€‚é…-----
SQL> -- ç”¨ä¾‹8: LIKE å‰ç¼€åŒ¹é… - ä»¥aå¼€å¤´
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE 'a%';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 105  | 1         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 105  | 1         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 382  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE 'a%'                           

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE 'a%';

COUNT(*)            
--------------------
339                 

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹9: LIKE ä¸­é—´åŒ¹é… - åŒ…å«test
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%test%';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 1    | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '%test%'                       

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%test%';

COUNT(*)            
--------------------
6                   

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹10: LIKE åŽç¼€åŒ¹é… - ä»¥zç»“å°¾
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%z';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 105  | 1         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 105  | 1         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 268  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '%z'                           

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%z';

COUNT(*)            
--------------------
352                 

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹11: NOT LIKE æµ‹è¯•
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col NOT LIKE 'a%';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 173  | 46        |       |        |
| 1  |   AGGR                  |       |                   | 1    | 173  | 46        |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 9342 | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL NOT LIKE 'a%'                       

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col NOT LIKE 'a%';

COUNT(*)            
--------------------
9385                

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹12: LIKE å•å­—ç¬¦åŒ¹é…
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '_';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 104  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 104  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 191  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '_'                            

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '_';

COUNT(*)            
--------------------
123                 

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹13: LIKE å¤šå­—ç¬¦åŒ¹é…
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '____';  -- æ­£å¥½4ä¸ªå­—ç¬¦

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 105  | 1         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 105  | 1         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 268  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '____'                         

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '____';  -- æ­£å¥½4ä¸ªå­—ç¬¦

COUNT(*)            
--------------------
215                 

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹14: LIKE å¸¦é€šé…ç¬¦çš„æ··åˆæ¨¡å¼
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE 'a%z';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 1    | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE 'a%z'                          

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE 'a%z';

COUNT(*)            
--------------------
0                   

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹15: LIKE åŒ¹é…ä¸‹åˆ’çº¿ï¼ˆä½¿ç”¨ESCAPEï¼‰
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%\_%' ESCAPE '\';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 1    | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '%\_%' ESCAPE '\'              

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%\_%' ESCAPE '\';

COUNT(*)            
--------------------
18                  

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹16: LIKE åŒ¹é…ç™¾åˆ†å·ï¼ˆä½¿ç”¨ESCAPEï¼‰
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%\%%' ESCAPE '\';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 38   | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '%\%%' ESCAPE '\'              

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '%\%%' ESCAPE '\';

COUNT(*)            
--------------------
51                  

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹17: LIKE åŒ¹é…ç©ºæ ¼
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '% %';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 1    | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '% %'                          

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '% %';

COUNT(*)            
--------------------
55                  

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹18: LIKE å¤æ‚æ¨¡å¼
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '_e%t';

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 38   | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL LIKE '_e%t'                         

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col LIKE '_e%t';

COUNT(*)            
--------------------
31                  

1 rows fetched.

SQL> 
SQL> -----æµ‹è¯•INæ“ä½œç¬¦é€‚é…-----
SQL> -- ç”¨ä¾‹19: IN åŸºç¡€æµ‹è¯• - å•ä¸ªå­—ç¬¦
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col IN ('a', 'b', 'c', 'd', 'e');

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 104  | 1         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 104  | 1         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 250  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL IN ('a', 'b', 'c', 'd', 'e')        

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col IN ('a', 'b', 'c', 'd', 'e');

COUNT(*)            
--------------------
19                  

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹20: IN æµ‹è¯• - å¤šä¸ªå­—ç¬¦ä¸²
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col IN ('abc', 'def', 'ghi', 'test');

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 104  | 1         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 104  | 1         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 200  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL IN ('abc', 'def', 'ghi', 'test')    

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col IN ('abc', 'def', 'ghi', 'test');

COUNT(*)            
--------------------
4                   

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹21: IN æµ‹è¯• - åŒ…å«ç©ºå­—ç¬¦ä¸²
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col IN ('', 'abc', 'def');

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 103  | 0         |       |        |
| 1  |   AGGR                  |       |                   | 1    | 103  | 0         |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 100  | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL IN (, 'abc', 'def')                 

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col IN ('', 'abc', 'def');

COUNT(*)            
--------------------
2                   

1 rows fetched.

SQL> 
SQL> -- ç”¨ä¾‹22: NOT IN æµ‹è¯•
SQL> EXPLAIN SELECT count(*) FROM test_explain_data WHERE varchar_col NOT IN ('abc', 'def', 'ghi');

EXPLAIN PLAN OUTPUT                                             
----------------------------------------------------------------
-------------------------------------------------------------------------------------------------------
| Id | Operation               | Owner | Name              | Rows | Cost | StartCost | Bytes | Remark |
-------------------------------------------------------------------------------------------------------
| 0  | SELECT STATEMENT        |       |                   | 1    | 174  | 47        |       |        |
| 1  |   AGGR                  |       |                   | 1    | 174  | 47        |       |        |
| 2  |       TABLE ACCESS FULL | SYS   | TEST_EXPLAIN_DATA | 9574 | 103  | 0         |       |        |
-------------------------------------------------------------------------------------------------------
Predicate Information (identified by id):                       
-----------------------------------------                       
    2 - filter: VARCHAR_COL NOT IN ('abc', 'def', 'ghi')        

10 rows fetched.

SQL> SELECT count(*) FROM test_explain_data WHERE varchar_col NOT IN ('abc', 'def', 'ghi');

COUNT(*)            
--------------------
9721                

1 rows fetched.

SQL> 
SQL> -- æ¸…ç†çŽ¯å¢ƒ
SQL> DROP TABLE IF EXISTS test_explain_data;

Succeed.
